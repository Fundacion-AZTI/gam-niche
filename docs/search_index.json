[["prediction-and-maps.html", "Chapter 8 Prediction and maps 8.1 Projection 8.2 Mapping", " Chapter 8 Prediction and maps predict from fitted models and produce maps Loading required libraries library(rgdal) library(ggplot2) library(dplyr) library(fields) #imageplot library(maps) #map world library(raster) library(RColorBrewer)#color palette library(tidyverse) library(rstudioapi) # general settings for ggplot (black-white background, larger base_size) theme_set(theme_bw(base_size = 16)) 8.1 Projection # location of script setwd(dirname(getSourceEditorContext()$path)) #load PA data load(file.path (&quot;data&quot;, &quot;outputs_for_modelling&quot;, &quot;PAdata_with_env.Rdata&quot;)) #Load raster stack containing all variables load(&quot;data/env/env_dataframe.Rdata&quot;) #remove positive bathy env_dataframe_proj&lt;-subset(env_dataframe,BO_bathymean&lt;0) #Load SC-GAM model load(file.path(&quot;models&quot;, &quot;model.Rdata&quot;)) # predicting predict &lt;- predict(selected_model,newdata=env_dataframe_proj,type =&quot;response&quot;,se.fit=T) env_dataframe_proj$fit&lt;-predict$fit env_dataframe_proj$se.fit&lt;-predict$se.fit 8.2 Mapping p&lt;-ggplot()+geom_raster(data=subset(env_dataframe_proj),aes(x,y,fill=fit))+scale_fill_gradient2(low=&quot;blue&quot;, mid=&quot;orange&quot;,high=&quot;red&quot;,midpoint = 0.5) +ggtitle(&quot;with bathy concave&quot;)+ geom_point(data=subset(data,occurrenceStatus==1),aes(LON,LAT),col=1,size=0.3) print(p) ggsave(file.path(&quot;plots&quot;,&quot;projections&quot;,paste0(&quot;proj_map.png&quot;)), p, device=&quot;png&quot;) save(env_dataframe_proj, file=&quot;results/projection.Rdata&quot;) "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
