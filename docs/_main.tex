% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{plainnat}
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Species distribution models (SDM)},
  pdfauthor={AZTI},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Species distribution models (SDM)}
\author{AZTI}
\date{2023-01-18}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{about}{%
\chapter*{About}\label{about}}
\addcontentsline{toc}{chapter}{About}

This is a short tutorial for constructing species distribution models in R. It describes the whole process from downloading OBIS and GBIF data, generating pseudo-absence data, including environmental data, fitting the model, validating the model and generating the resulting maps for visualization.

The code is available in \href{https://github.com/Fundacion-AZTI/SDM}{AZTI's github repository} repository and the book is readily available \href{https://fundacion-azti.github.io/SDM/}{here}.

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

Species distribution models (SDMs) are numerical tools that combine observations of species occurrence or abundance at known locations with information on the environmental and/or spatial characteristics of those locations \citep{elith_etal_2009}. They are also known as \ldots{}

A wide variety of methods have been used \ldots{}

Reviews of SDM literature include \ldots{}

One of the common problems is that, the fitted models do not agree with the ecological niche theory\ldots{}

This book provides a tutorial on how to use shape-constrained generalized additive models to build SDMs. We follow the key steps in good modeling practice of SDMs \citep{elith_etal_2009}. We first start by downloading presence data from GBIF/OBIS datasets and we create pseudo-absence data. Then, we download data on environmental covariates and we extract their value at each of the presence/pseudo-absence data points. Based on this dataset, we conduct an exploratory analysis that will help us deciding on the best modelling approach. We fit the model to the dataset and we evaluate the quality of the fit and the realism of the fitted response function. We select a threshold value to transform the continuous probability predictions into binary responses and we validate the model using a k-fold approach. Finally, we show the predicted maps.

\hypertarget{libraries}{%
\chapter{Libraries}\label{libraries}}

Load libraries that will be used

\hypertarget{presence-absence-data}{%
\chapter{Presence-absence data}\label{presence-absence-data}}

Bla bla bla

\hypertarget{download-presence-data}{%
\section{Download presence data}\label{download-presence-data}}

Download from GBIF OBIS. Mireia

\hypertarget{create-pseudo-absence-data}{%
\section{Create pseudo-absence data}\label{create-pseudo-absence-data}}

Prevalence 50\%

See code from ANICHO (mantaining some space around presences). Leire C.

\hypertarget{environmental-data}{%
\chapter{Environmental data}\label{environmental-data}}

Bla bla bla

\hypertarget{download-from-public-repositories}{%
\section{Download from public repositories}\label{download-from-public-repositories}}

Download from Bio-oracle.
Guillem le pasa el c√≥digo a Mireia, que lo sube a github

\hypertarget{operations-with-rasters-maybe-not-needed}{%
\section{Operations with rasters (maybe not needed)}\label{operations-with-rasters-maybe-not-needed}}

We can complete this a bit more later on, though not necessary right now

\hypertarget{prepare-final-dataset}{%
\chapter{Prepare final dataset}\label{prepare-final-dataset}}

Bla bla bla

\hypertarget{extract-environmental-data-associated-to-presence-absence-data}{%
\section{Extract environmental data associated to presence-absence data}\label{extract-environmental-data-associated-to-presence-absence-data}}

\hypertarget{exploratory-plots}{%
\section{Exploratory plots}\label{exploratory-plots}}

\hypertarget{shape-constrained-generalized-additive-models}{%
\chapter{Shape Constrained-Generalized Additive Models}\label{shape-constrained-generalized-additive-models}}

One citation is \citep{citores_etal_2020}

Mention there is an alternative using \texttt{mboost} that won't be further developed here.

\hypertarget{model-fit}{%
\section{Model fit}\label{model-fit}}

\hypertarget{model-selection}{%
\section{Model selection}\label{model-selection}}

\hypertarget{model-validation}{%
\chapter{Model validation}\label{model-validation}}

Bla bla

\hypertarget{optimum-threshold}{%
\section{Optimum threshold}\label{optimum-threshold}}

\hypertarget{k-fold-validation}{%
\section{k-fold validation}\label{k-fold-validation}}

\hypertarget{prediction-and-maps}{%
\chapter{Prediction and maps}\label{prediction-and-maps}}

predict from fitted models and produce maps

  \bibliography{references.bib}

\end{document}
